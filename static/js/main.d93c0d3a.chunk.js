(this["webpackJsonpreact-p5js-tonejs-starter-kit"]=this["webpackJsonpreact-p5js-tonejs-starter-kit"]||[]).push([[0],{17:function(e,t,s){},30:function(e,t,s){"use strict";s.r(t);var i=s(1),a=s.n(i),r=s(10),o=s.n(r),n=(s(17),s(2));window.p5=n;s(19);var c=s(11),l=s(0);function h(){return Object(l.jsxs)("svg",{id:"play-icon",class:"fade-out",xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",children:[Object(l.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(l.jsx)("path",{d:"M10 16.5l6-4.5-6-4.5v9zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})]})}var d=s(3),p=function e(t,s,i,a){Object(d.a)(this,e),this.lastPos=i.createVector(t,s),this.pos=i.createVector(t,s),this.vel=i.createVector(0,0),this.acc=i.createVector(0,0),this.size=i.random(2,20),this.h=a},u=s(12),f=function(){function e(t,s,i,a){Object(d.a)(this,e),this.p=t,this.x=s,this.y=i,this.hue=a,this.size=0}return Object(u.a)(e,[{key:"update",value:function(){this.size++}},{key:"draw",value:function(){this.p.translate(this.x,this.y),this.p.strokeWeight(2);for(var e=0;e<5;e++)this.p.fill(this.hue,100,100,50),this.p.stroke(this.hue,100,100,50),this.p.ellipse(0,20,this.size/2,this.size),this.p.fill(this.hue,0,100,100),this.p.ellipse(0,25,this.size/8,this.size/8),this.p.rotate(this.p.PI/2.5);this.p.fill(this.hue+20,100,100,100),this.p.stroke(this.hue+20,100,100,100),this.p.ellipse(0,0,this.size/8*3,this.size/8*3),this.p.fill(this.hue,0,100,100),this.p.ellipse(0,0,this.size/8*1.5,this.size/8*1.5);for(var t=0;t<5;t++)this.p.fill(this.hue,0,100,100),this.p.stroke(this.hue5,0,100,100),this.p.line(0,0,0,this.size/8*3),this.p.rotate(this.p.PI/2.5);this.p.translate(-this.x,-this.y)}}]),e}(),g=s.p+"static/media/sakura-no-1.68fe6d37.ogg",y=s.p+"static/media/sakura-no-1.5f570a37.mid",v=function(){var e=Object(i.useRef)(),t=function(e){e.canvas=null,e.canvasWidth=window.innerWidth,e.canvasHeight=window.innerHeight,e.audioLoaded=!1,e.player=null,e.tempo=98,e.barAsSeconds=Math.floor(60/e.tempo*4*1e5)/1e5,e.PPQ=15360,e.particlesArray=[],e.globalHue=300,e.spawnPerFrame=3,e.noteSize=200,e.notePosX=0,e.notePosY=0,e.noteHue=0,e.flowers=[],e.loadMidi=function(){c.Midi.fromUrl(y).then((function(t){console.log(t);var s=t.tracks[3].notes;e.scheduleCueSet(s,"executeCueSet1"),e.audioLoaded=!0,document.getElementById("loader").classList.add("loading--complete")}))},e.preload=function(){e.song=e.loadSound(g,e.loadMidi),e.song.onended(e.logCredits)},e.scheduleCueSet=function(t,s){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=-1,r=1,o=0;o<t.length;o++){var n=t[o],c=n.ticks,l=n.time;(c!==a||i)&&(n.currentCue=r,e.song.addCue(l,e[s],n),a=c,r++)}},e.setup=function(){e.colorMode(e.HSB,360,100,100,100),e.canvas=e.createCanvas(e.canvasWidth,e.canvasHeight),e.background(0),e.smooth(),e.noStroke()},e.draw=function(){if(e.audioLoaded&&e.song.isPlaying()){e.fill(0,5),e.rect(0,0,e.width,e.height);for(var t=0;t<e.spawnPerFrame;t++)e.particlesArray.push(new p(e.random(e.width),0,e,e.globalHue));for(t=e.particlesArray.length-1;t>-1;t--){if(e.particlesArray[t].acc.add(e.createVector(0,.01*e.particlesArray[t].size)),e.notePosX&&e.abs(e.particlesArray[t].pos.x-e.notePosX)<e.noteSize)if(e.dist(e.notePosX,e.notePosY,e.particlesArray[t].pos.x,e.particlesArray[t].pos.y)<e.noteSize){var s=e.createVector(e.notePosX,e.notePosY-e.noteSize);s.sub(e.createVector(e.particlesArray[t].pos.x,e.particlesArray[t].pos.y)),s.normalize(),e.particlesArray[t].vel.add(s),e.particlesArray[t].h+=1.5,e.particlesArray[t].h>360&&(e.particlesArray[t].h=0)}e.particlesArray[t].vel.add(e.particlesArray[t].acc),e.particlesArray[t].pos.add(e.particlesArray[t].vel),e.particlesArray[t].acc.mult(0),e.stroke(e.particlesArray[t].h,100,100),e.strokeWeight(e.particlesArray[t].size),e.line(e.particlesArray[t].lastPos.x,e.particlesArray[t].lastPos.y,e.particlesArray[t].pos.x,e.particlesArray[t].pos.y),e.particlesArray[t].lastPos.set(e.particlesArray[t].pos.x,e.particlesArray[t].pos.y),(e.particlesArray[t].pos.y>e.height||e.particlesArray[t].pos.x<0||e.particlesArray[t].pos.x>e.width)&&e.particlesArray.splice(t,1)}for(t=0;t<e.flowers.length;t++)e.flowers[t].draw(),e.flowers[t].update(),e.flowers[t].size>80&&e.flowers.splice(t,1);e.globalHue+=.15,e.globalHue>330&&(e.globalHue=270)}},e.barAsTicks=61440,e.executeCueSet1=function(t){var s=t.time,i=t.midi,a=Math.floor(1e5*s)/1e5;if(parseFloat(a)>=parseFloat(e.barAsSeconds)){for(;a>=e.barAsSeconds;)a-=e.barAsSeconds;a=a>0?a:0}e.notePosX=e.width/16+e.width/e.barAsSeconds*a,e.notePosY=e.map(i,60,77,e.height/16,e.height-e.height/16),e.noteHue=e.random(0,360),e.flowers.push(new f(e,e.notePosX,e.notePosY,e.globalHue))},e.mousePressed=function(){e.audioLoaded&&(e.song.isPlaying()?e.song.pause():(parseInt(e.song.currentTime())>=parseInt(e.song.buffer.duration)&&e.reset(),document.getElementById("play-icon").classList.add("fade-out"),e.canvas.addClass("fade-in"),e.song.play()))},e.creditsLogged=!1,e.logCredits=function(){!e.creditsLogged&&parseInt(e.song.currentTime())>=parseInt(e.song.buffer.duration)&&(e.creditsLogged=!0,console.log("Music By: http://labcat.nz/","\n","Animation By: https://github.com/LABCAT/"),e.song.stop())},e.reset=function(){},e.updateCanvasDimensions=function(){e.canvasWidth=window.innerWidth,e.canvasHeight=window.innerHeight,e.canvas=e.resizeCanvas(e.canvasWidth,e.canvasHeight)},window.attachEvent?window.attachEvent("onresize",(function(){e.updateCanvasDimensions()})):window.addEventListener&&window.addEventListener("resize",(function(){e.updateCanvasDimensions()}),!0)};return Object(i.useEffect)((function(){new n(t,e.current)}),[]),Object(l.jsx)("div",{ref:e,children:Object(l.jsx)(h,{})})};var w=function(){return Object(l.jsx)(v,{})};o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(w,{})}),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.d93c0d3a.chunk.js.map